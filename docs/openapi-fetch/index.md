---
title: openapi-fetch
---

<img src="/assets/openapi-fetch.svg" alt="openapi-fetch" width="216" height="40" />

openapi-fetch is a typesafe fetch client that pulls in your OpenAPI schema. Weighs **2 kb** and has virtually zero runtime. Works with React, Vue, Svelte, or vanilla JS.

| Library                    | Size (min) | ‚ÄúGET‚Äù request              |
| :------------------------- | ---------: | :------------------------- |
| openapi-fetch              |     `2 kB` | `200k` ops/s (fastest)     |
| openapi-typescript-fetch   |     `4 kB` | `100k` ops/s (2√ó slower)   |
| axios                      |    `32 kB` | `165k` ops/s (1.2√ó slower) |
| superagent                 |    `55 kB` | `50k` ops/s (6.6√ó slower)  |
| openapi-typescript-codegen |   `367 kB` | `75k` ops/s (2.6√ó slower)  |

The syntax is inspired by popular libraries like react-query or Apollo client, but without all the bells and whistles and in a 2 kb package.

```ts
import createClient from "openapi-fetch";
import type { paths } from "./api/v1"; // generated by openapi-typescript

const { GET, PUT } = createClient<paths>({ baseUrl: "https://myapi.dev/v1/" });

const {
  data, // only present if 2XX response
  error, // only present if 4XX or 5XX response
} = await GET("/blogposts/123");

await PUT("/blogposts", {
  body: {
    title: "My New Post",
  },
});
```

`data` and `error` are typechecked and expose their shapes to Intellisence in VS Code (and any other IDE with TypeScript support). Likewise, the request `body` will also typecheck its fields, erring if any required params are missing, or if there‚Äôs a type mismatch.

`GET()`, `PUT()`, `POST()`, etc. are thin wrappers around the native [fetch API](https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API) (which you can [swap for any¬†call](/openapi-fetch/api#create-client)).

Notice there are no generics, and no manual typing. Your endpoint‚Äôs request and response were inferred automatically. This is a huge improvement in the type safety of your endpoints because **every manual assertion could lead to a bug**! This eliminates all of the following:

- ‚úÖ No typos in URLs or params
- ‚úÖ All parameters, request bodies, and responses are type-checked and 100% match your schema
- ‚úÖ No manual typing of your API
- ‚úÖ Eliminates `any` types that hide bugs
- ‚úÖ Also eliminates `as` type overrides that can also hide bugs
- ‚úÖ All of this in a **2 kB** client package üéâ

## Setup

::: warning

openapi-fetch currently requires openapi-typescript@6.x (latest). An upcoming breaking release will support openapi-typescript@7.x.

:::

Install this library along with [openapi-typescript](/introduction):

```bash
npm i openapi-fetch
npm i -D openapi-typescript typescript
```

::: tip Highly recommended

Enable [noUncheckedIndexedAccess](https://www.typescriptlang.org/tsconfig#noUncheckedIndexedAccess) in your `tsconfig.json` ([docs](/advanced#enable-nouncheckedindexaccess-in-your-tsconfigjson))

:::

Next, generate TypeScript types from your OpenAPI schema using openapi-typescript:

```bash
npx openapi-typescript ./path/to/api/v1.yaml -o ./src/lib/api/v1.d.ts
```

Lastly, be sure to **run typechecking** in your project. This can be done by adding `tsc --noEmit` to your [npm scripts](https://docs.npmjs.com/cli/v9/using-npm/scripts) like¬†so:

```json
{
  "scripts": {
    "test:ts": "tsc --noEmit"
  }
}
```

And run `npm run test:ts` in your CI to catch type¬†errors.

::: tip
Use `tsc --noEmit` to check for type errors rather than relying on your linter or your build command. Nothing will typecheck as accurately as the TypeScript compiler itself.
:::

## Usage

The best part about using openapi-fetch over oldschool codegen is no documentation needed. openapi-fetch encourages using your existing OpenAPI documentation rather than trying to find what function to import, or what parameters that function wants:

![OpenAPI schema example](/assets/openapi-schema.png)

```ts
import createClient from "openapi-fetch";
import type { paths } from "./api/v1";

const { GET, PUT } = createClient<paths>({ baseUrl: "https://myapi.dev/v1/" });

const { data, error } = await GET("/blogposts/{post_id}", {
  params: {
    path: { post_id: "my-post" },
    query: { version: 2 },
  },
});

const { data, error } = await PUT("/blogposts", {
  body: {
    title: "New Post",
    body: "<p>New post body</p>",
    publish_date: new Date("2023-03-01T12:00:00Z").getTime(),
  },
});
```

1. The HTTP method is pulled directly from `createClient()`
2. You pass in your desired `path` to `GET()`, `PUT()`, etc.
3. TypeScript takes over the rest and returns helpful errors for anything missing or invalid

### Pathname

The pathname of `GET()`, `PUT()`, `POST()`, etc. **must match your schema literally.** Note in the example, the URL is `/blogposts/{post_id}`. This library will replace all `path` params for you (so they can be typechecked)

::: tip

openapi-fetch infers types from the URL. Prefer static string values over dynamic runtime values,¬†e.g.:

- ‚úÖ¬†`"/blogposts/{post_id}"`
- ‚ùå¬†`[...pathParts].join("/") + "{post_id}"`

:::

### Request

The `GET()` request shown needed the `params` object that groups [parameters by type](https://spec.openapis.org/oas/latest.html#parameter-object) (`path` or `query`). If a required param is missing, or the wrong type, a type error will be thrown.

The `POST()` request required a `body` object that provided all necessary [requestBody](https://spec.openapis.org/oas/latest.html#request-body-object) data.

### Response

All methods return an object with **data**, **error**, and **response**.

```ts
const { data, error, response } = await GET("/url");
```

| Object     | Response                                                                                                                    |
| :--------- | :-------------------------------------------------------------------------------------------------------------------------- |
| `data`     | `2xx` response if OK; otherwise `undefined`                                                                                 |
| `error`    | `5xx`, `4xx`, or `default` response if not OK; otherwise `undefined`                                                        |
| `response` | [The original Response](https://developer.mozilla.org/en-US/docs/Web/API/Response) which contains `status`, `headers`, etc. |

## Support

| Platform       | Support                                                                                                                                            |
| :------------- | :------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Browsers**   | [See fetch API support](https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API#browser_compatibility) (widely-available in all major browsers) |
| **Node**       | >= 18.0.0                                                                                                                                          |
| **TypeScript** | >= 4.7 (>= 5.0 recommended)                                                                                                                        |
